<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Import Reklam Image</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, #f5f7fb, #e0e9f6);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 30px;
    }
    .card {
      width: 100%;
      max-width: 520px;
      background: #fff;
      border-radius: 24px;
      padding: 32px;
      box-shadow: 0 20px 60px rgba(15, 23, 42, 0.12);
    }
    h1 {
      font-size: 26px;
      margin-bottom: 8px;
      color: #0f172a;
    }
    p {
      margin: 0 0 24px;
      color: #64748b;
      line-height: 1.5;
    }
    label {
      display: block;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 8px;
    }
    .upload-box {
      border: 2px dashed #cbd5f5;
      border-radius: 18px;
      padding: 28px;
      text-align: center;
      transition: border-color 0.2s;
    }
    .upload-box.dragover {
      border-color: #2563eb;
      background: #eff6ff;
    }
    input[type="file"] {
      display: none;
    }
    .upload-box button {
      background: #2563eb;
      color: #fff;
      border: none;
      border-radius: 999px;
      padding: 12px 28px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }
    .preview {
      margin-top: 24px;
      display: none;
    }
    .preview img {
      width: 100%;
      border-radius: 16px;
      max-height: 260px;
      object-fit: cover;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    }
    .preview .meta {
      margin-top: 10px;
      color: #475569;
      font-size: 14px;
    }
    .submit-btn {
      width: 100%;
      padding: 15px;
      margin-top: 26px;
      border: none;
      border-radius: 16px;
      background: #0f172a;
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .submit-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .status {
      margin-top: 18px;
      font-size: 14px;
      color: #0f172a;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Import Reklam Image</h1>
    <p>Upload the advertisement image you want to promote. Accepted formats: JPG, PNG, and WebP up to 5 MB.</p>

    <form id="uploadForm">
      <label>Choose file</label>
      <div class="upload-box" id="dropZone">
        <input type="file" id="imageInput" accept="image/*">
        <p>Drag & drop your image here or</p>
        <button type="button" id="browseBtn">Browse files</button>
      </div>

      <div class="preview" id="preview">
        <img id="previewImg" alt="Preview">
        <div class="meta" id="fileMeta"></div>
      </div>

      <button class="submit-btn" id="submitBtn" disabled>Submit image</button>
      <div class="status" id="status"></div>
    </form>
  </div>

  <script>
  const API_ENDPOINT =
    "https://api.bodaqarat.com/import_reklam_image";

  const input = document.getElementById('imageInput');
  const browseBtn = document.getElementById('browseBtn');
  const dropZone = document.getElementById('dropZone');
  const preview = document.getElementById('preview');
  const previewImg = document.getElementById('previewImg');
  const fileMeta = document.getElementById('fileMeta');
  const submitBtn = document.getElementById('submitBtn');
  const statusEl = document.getElementById('status');
  const form = document.getElementById('uploadForm');

  let selectedFile = null;
  const MAX_SIZE = 5 * 1024 * 1024;

  browseBtn.addEventListener('click', () => input.click());
  input.addEventListener('change', () => handleFiles(input.files));

  ['dragenter', 'dragover'].forEach(evt =>
    dropZone.addEventListener(evt, e => {
      e.preventDefault();
      e.stopPropagation();
      dropZone.classList.add('dragover');
    })
  );

  ['dragleave', 'drop'].forEach(evt =>
    dropZone.addEventListener(evt, e => {
      e.preventDefault();
      e.stopPropagation();
      dropZone.classList.remove('dragover');
    })
  );

  dropZone.addEventListener('drop', e =>
    handleFiles(e.dataTransfer.files)
  );

  function handleFiles(files) {
    const file = files[0];
    if (!file) return;

    if (!file.type.startsWith('image/')) {
      showStatus('Please select an image file.', true);
      return;
    }

    if (file.size > MAX_SIZE) {
      showStatus('Image is too large (max 5 MB).', true);
      return;
    }

    selectedFile = file;
    previewImg.src = URL.createObjectURL(file);
    fileMeta.textContent =
      `${file.name} • ${(file.size / 1024).toFixed(1)} KB`;

    preview.style.display = 'block';
    submitBtn.disabled = false;
    statusEl.textContent = '';
  }

  form.addEventListener('submit', async e => {
    e.preventDefault();
    if (!selectedFile) return;

    submitBtn.disabled = true;
    showStatus('Uploading image…');

    const formData = new FormData();
    formData.append('image', selectedFile);

    try {
      const response = await fetch(API_ENDPOINT, {
        method: 'POST',
        body: formData
      });

      if (!response.ok) {
        throw new Error(`Server error: ${response.status}`);
      }

      showStatus('Image submitted successfully!');
      form.reset();
      preview.style.display = 'none';
      selectedFile = null;
    } catch (err) {
      showStatus(err.message || 'Upload failed.', true);
    } finally {
      submitBtn.disabled = false;
    }
  });

  function showStatus(message, isError = false) {
    statusEl.textContent = message;
    statusEl.style.color = isError ? '#b91c1c' : '#0f172a';
  }
</script>

</body>
</html>
